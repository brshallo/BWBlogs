---
title: "Why odds shouldn't be the 'odd one out' when thinking about event outcomes"
date: "2018-07-20"
name: Bryan Shalloway and Will Burton
subtitle: "`r paste('Last updated: ', format(Sys.time(), '%Y-%m-%d'))`"
output: 
  html_document:
    code_folding: hide
    toc: true
    toc_depth: 5
    toc_float:
      collapsed: false
      smooth_scroll: false
---

```{r}
knitr::opts_chunk$set(echo = TRUE, cache = TRUE, message = FALSE, warning = FALSE)
```

```{r}
library(tidyverse)
library(DiagrammeR)
```

# The odd one out in stats class

We grow-up learning proportions, percentages, risks, probabilities... these are the popular concepts through which we understand the distribution and plausability of finite discrete outcomes. They are used when a teacher gives a grade on a test or a doctor describes the risk of an illness. On the other hand, you might imagine odds as being relegated to the more shady professional domains of gamblers and statisticians and think it as a concept you don't need to understand. In this post I'll describe some of the excellent qualities of odds and odds ratios and why they deserve your attention and should not be thought of as the *odd* one out when discussing event outcomes[^1].

[^1]: Fun fact, according to Wikipedia humanity conceived of odds far before they developed notions of probability. Check-out this quote from Shakespeare's *Henry IV, Part II* dating back to the 1500's, "Knew that we ventured on such dangerous seas
That if we wrought out life 'twas ten to one." Perhaps that quote describes humanities fate if we forget the concept of odds.

# Odds and probabilities are ratios

Odds, like probabilities, can represent a relationship between two possible outcomes. Both can be thought of as ratios. Picture a bag with 5 red marbels and 2 blue marbles. 

```{r, fig.height = 2}
create_graph() %>%
  add_n_nodes(5, 
              label = "I am red!!",
              node_aes = node_aes(fillcolor = "red",
                                  fontsize = 5)) %>% 
  add_n_nodes(2, 
              label = "I am blue :-(",
              node_aes = node_aes(fillcolor = "blue",
                                  fontsize = 5)) %>% 
  render_graph()


```

You plan to select a single marble from the bag and want to conceptualize the plausability of the possible outcomes. Odds could be used to represent the ratio between red and blue outcomes. Probability could represent the ratio between red and red + blue outcomes or blue and blue + red outcomes.

*Ratio for odds*^[You could say there are 5 to 2 (5:2) odds of selecting a red marble at random from the bag or, if you ran this exercise many times, you'd expect to select 2.5 times as many red marbles as blue marbles.]:

```{r, fig.height = 2, fig.width = 2}
tibble(color = c(rep("red", 5), rep("blue", 2)),
       y = c(rep(.5, 5), rep(-.5, 2)), 
       x = c(1:5, 2.5, 3.5)) %>% 
  ggplot(aes(x = x, y = y, colour = color, size = 10))+
  geom_hline(yintercept = 0, size = 3, colour = "black")+
  geom_point()+
  theme_void()+
  guides(size = "none", colour = "none")+
  scale_colour_manual(values = c(blue = "blue", red = "red"))
  
```

*Ratio for probability*^[You'd say there is a 5 / 7ths chance of selecting a red marble, or that you would select a red marble ~71% of the time.]:

```{r, fig.height = 2, fig.width = 2}
tibble(color = c(rep("red", 5), rep("red", 5), rep("blue", 2)),
       y = c(rep(.5, 5), rep(-.5, 7)), 
       x = c(1:5, seq(0, 6, length.out = 7))) %>% 
  ggplot(aes(x = x, y = y, colour = color, size = 10))+
  geom_hline(yintercept = 0, size = 3, colour = "black")+
  geom_point()+
  theme_void()+
  guides(size = "none", colour = "none")+
  scale_colour_manual(values = c(blue = "blue", red = "red"))
  
```

For odds, each type of outcome could be thought of as existing *either* in the numerator or the denominator. For probabilities, the class of interest (e.g. red marbles) influences both^[I like to think of odds as being more egalitarian because both outcomes get their own side of the ratio. Probabilities are 'outcome of interest' centric in that the selected class affects both sides. Does this mean that if you believe in things like equality and freedom you should be a fan of odds and odds ratios? I think it does.]. 

Some problems lend themselves more naturally to probability and others to odds. I'll briefly reference some of these differences in [Types of problems]. For the remainder of the post I'll focus on where odds suggests an intuitive and consistent framework for conceptualizing a common problem in event outcomes^[Afterall odds are the ones that need PR help.].

# Different contexts

Odds are often helpful when the 'outcome of interest' is arbitrary^[E.g. you don't care if the problem is framed as 'plausability of selecting *red* or plausability of selecting *blue*.] and you want to compare your ratio of outcomes across different contexts^[E.g. how does the plausability of events when selecting marbles in my bag relate to the plausability of events when selecting marbles in some other bag?]. Let's change examples to sports. Picture WNBA basketball. There is evidence that home court matters. Let's say the odds of the home team winning are 3 to 2, i.e. for every 3 home team wins the away team wins 2. Equivalently there is a 3/5ths chance (60% probability) of the home team winning. Maybe you want to compare this 'impact of home court advantage' across leagues to college basektball. 

Perhaps you have a friend who says 'Oh, college players get rattled easily. The impact of home court advantage in college is twice what it is at the professional level.'

Another friend then challenges you, 'Given what you know about events at the professional level, what would be the plausability of winning at home in college?'^[At first you get frustrated with your friends for not being specific as to what they mean by 'twice as big an impact.' Then you start to appreciate their vagueness as it gives you the latitude to try out a few potential framings.] 

If you take an odds approach, you might formalize the problem your friends gave you as...

* *Already known:* odds of winning at home in the WNBA are 3 to 2.
* *New information from friend:* The ratio of home wins to losses in the WNBA to college is 2 to 1. 
* *Question she is asking:* What are the odds of winning at home in college?" 

(PUT THE ABOVE INTO AN EQUATION)

To calculate the odds of winning at home in college you simply double the ratio of winning at home in the WNBA.

```{r}
# graph initial setting and new setting
# (3:2), * 2, then 3 to 1
```

Poof! A meaningful answer for your friend: the odds of the home team winning are 3 to 1 at the college level. 

You could have framed this problem in terms of losses and come to the same conclusion. In the WNBA, for every 2 home losses there are 3 home wins. If we invert what our friend told us, the ratio should be half that in college.

```{r}
# graph initial setting and new setting
# (3:2), * 2, then 3 to 1
```

Our odds of losing at home simplify to 1 : 3. This is consistent with our 3 : 1 odds of winning at home. It does not matter if we frame the problem as 'winning at home' or 'losing at home' the outcomes are consistent.

It's less clear how you might formalize your friend's comment as probabilities. Doubling the chance/probability of winning from 3/5ths to 6/5ths is meaningless in this context. 

```{r}
# double and see show that it increases by 2x

# :-( you can't have a probability greater than 1
```

You could flip the problem and instead frame it as 'What is the chance of *losing* at home in college'. Chance of losing at home is 2/5ths, halved becomes 1/5th. Transitively, the chance of winning must be 4/5ths. While you have an answer, the lack of symmetry at the start leaves you wondering if this method would produce consistent results on similar problems.

Your friend changes things, 'On second thought, home court advantage is only a third mor important in college than in the WNBA.'

Replace the relevant bullet from before to instead be:

* *New information from friend:* The ratio of the odds of winning at home in the WNBA vs. in college is 4 to 3. 

```{r}
# chart showing * multiply by 4 / 3
```

This simplifies to a 2:1 odds of winning at home in college. Try on your own to invert the problem and solve for the odds of losing at home^[You should arrive at an odds of 1 : 2.].

For probability, we start at 3/5th chance of WNBA home winning and increase this by a third:

```{r}
# (3/5)\*(4/3) (MAKE THIS A CHART), 
```

This simplifies to a chance of winning of 4/5ths^[i.e. 80%]. If we framed the problem at the start from the perspective of losing at home in the WNBA, a 2/5ths chance, the college loss rate becomes:

```{r}
#  (2/5)\*(3/4) = 3/10,

```

This simplifies to 3/10ths (30% home loss rate) which entails a 70% home win rate.

Our college basketball home win rate came out to either 80% or 70%. Our outcome depended on if we chose 'win' or 'loss' to represent our numerator. These are just a couple examples of discontinuities you might run into when simplistically trying to compare probabilities of an event across contexts.

# Many variables

There are other factors that might affect the plausability of winning or losing at home other than college/professional level (e.g. 'quality of coach', 'distance away team traveled', etc.). Maybe you want to build a model that takes these into account. The ease with which odds can be transformed to compare variables makes them a good starting place ^[In the future I'll segue into some additional transformations you can apply to the ratios of odds that allow for more sophisticated modeling of the plausability of event outcomes across multiple variables, i.e. I'll be talking about logistic regression.]. 

# Other problems

My discussion of what we mean when we say 'twice as big an effect on home winning' has been a little loose. For a more rigorous discussion of how to try and formalize a similar comment, check-out this Stack Exchange thread: https://math.stackexchange.com/questions/761504/what-does-twice-as-likely-mean .

To be clear, odds don't always make problems more simple. For example, Bayes' function^[Maybe the most important function in statistics] is perhaps easier to follow in it's traditional probability form:

Probability form:
$$P(A|B) = (P(B|A)*P(A))/(P(B))$$

Odds form:
$$O(A_1:A_2|B) = (P(B|A_1)/P(B|A_2))$$

-Wikipedia 

Ratios of odds are helpful for comparing impacts of variables when the target outcome falls into a class such as win/loss, red/blue, etc. Perhaps though you have a problem where an event can happen multiple times. For example, how many times will the mascot start dancing during the game? Relevant variables might be weight of custome, playing a rival/not a rival, etc. The impact of variables for this type of problem is typically best understood as the ratio of probabilities^[The classification and counting problems represent the differences between logistic and poisson regression.] - but more on this in the future^[I may or may not also discuss the differences between the logit and probit transformations and the respective advantages of each.]...

## Communicating odds

A great advantage of using probabilities is that people know how to communicate with them. If you want to try and communicate 'odds' to someone who is new to the concept, I think a helpful heuristic is to frame it in the template 'for every ___ ___, there are ___ ___." E.g. "For every 3 home wins, there are 2 home losses", AKA the odds of winning at home are 3 : 2.  If you need to speak about odds ratios you could tweak this form slightly, e.g. "The ratio of home wins to home losses is twice as high in college compared to professional leagues." Keeping the context of the problem central to the explanation is central to helping new learners/colleagues understand them. And the concept of odds is too important not to understand!


